# ุฑุงูููุง ุชุณุช Badge ูพุงูโูุง ุฎูุงูุฏู ูุดุฏู

## โ ุชุบุฑุงุช ุงุนูุงู ุดุฏู

### Backend
- โ Endpoint: `GET /api/v1/messages/unread-count`
- โ Migration ุงุฌุฑุง ุดุฏู
- โ Backend ุฑุณุชุงุฑุช ุดุฏู

### Frontend
- โ Hook: `useUnreadCount()`
- โ Navbar: ููุงุด badge ูุฑูุฒ
- โ Auto-refresh ูุฑ 30 ุซุงูู

---

## ๐ ูุฑุงุญู ุชุณุช

### 1. ุงุทููุงู ุงุฒ ุงุฌุฑุง Frontend

```bash
# ุฑูุชู ุจู ูพูุดู frontend
cd /Users/sedmahdiyar/Desktop/Minila/frontend

# ุงฺฏุฑ ุฏุฑ ุญุงู ุงุฌุฑุง ูุณุช:
npm run dev

# ุงฺฏุฑ ุฏุฑ ุญุงู ุงุฌุฑุงุณุชุ ุฑุณุชุงุฑุช ฺฉู:
# Ctrl+C ุจุฑุง stop
# ุณูพุณ ุฏูุจุงุฑู:
npm run dev
```

### 2. ูุงฺฏู ฺฉุฑุฏู

1. ุจุงุฒ ฺฉู: http://localhost:3000
2. ูุงฺฏู ฺฉู ุจุง ฺฉ ฺฉุงุฑุจุฑ (ูุซูุงู User1)

### 3. ุงุฌุงุฏ ูพุงูโูุง ุฎูุงูุฏู ูุดุฏู

**ฺฏุฒูู A: ุจุง ฺฉ ูุฑูุฑฺฏุฑ ุฏฺฏุฑ ุง Incognito**
1. ฺฉ ุชุจ Incognito/Private ุจุงุฒ ฺฉู
2. ูุงฺฏู ฺฉู ุจุง ฺฉุงุฑุจุฑ ุฏฺฏุฑ (User2)
3. ุจู http://localhost:3000/messages ุจุฑู
4. ุจุฑุง User1 ูพุงู ุจูุฑุณุช

**ฺฏุฒูู B: ุจุง API ูุณุชูู**
```bash
# ุงุจุชุฏุง ูุงฺฏู ฺฉู ู ุชูฺฉู ุฑุง ุจฺฏุฑ
TOKEN="your-access-token-here"

# ุงุฑุณุงู ูพุงู ุจู User ุจุง ID 1
curl -X POST http://localhost:8000/api/v1/messages/ \
  -H "Authorization: Bearer $TOKEN" \
  -H "Content-Type: application/json" \
  -d '{"receiver_id": 1, "body": "ุชุณุช ูพุงู ุฎูุงูุฏู ูุดุฏู"}'
```

### 4. ูุดุงูุฏู Badge

1. ุจู ุนููุงู User1ุ ุจู ูุฑ ุตูุญูโุง ุจุฑู (ูุซูุงู Dashboard)
2. ุฏุฑ **Navbar** ุจุงูุง ุตูุญูุ **ุณูุช ฺูพ** ูุชู "ูพุงูโูุง"
3. ุจุงุฏ ฺฉ **ุฏุงุฑู ูุฑูุฒ** ุจุง **ุชุนุฏุงุฏ** ูพุงูโูุง ุฎูุงูุฏู ูุดุฏู ุจุจู

### 5. ุชุณุช ุฎูุงูุฏู ูพุงู

1. ุฑู "ูพุงูโูุง" ฺฉูฺฉ ฺฉู
2. ูฺฉุงููู ุจุง User2 ุฑุง ุจุงุฒ ฺฉู
3. ุจู ุตูุญู ุฏฺฏุฑ ุจุฑฺฏุฑุฏ
4. Badge ุจุงุฏ ฺฉุงูุด ุงุจุฏ ุง ุญุฐู ุดูุฏ

---

## ๐ ุนุจโุงุจ

### Badge ููุงุด ุฏุงุฏู ููโุดูุฏุ

**ฺฺฉ 1: Console ูุฑูุฑฺฏุฑ**
```
F12 โ Console
- ุฎุทุง 401 Unauthorizedุ โ ุฏูุจุงุฑู ูุงฺฏู ฺฉู
- ุฎุทุง Networkุ โ Backend ฺฺฉ ฺฉู
```

**ฺฺฉ 2: Backend ุณุงูู ุงุณุชุ**
```bash
curl http://localhost:8000/health
# ุจุงุฏ ุจฺฏูุฏ: {"ok":true}
```

**ฺฺฉ 3: Hard Refresh**
```
Ctrl+Shift+R (Windows/Linux)
Cmd+Shift+R (Mac)
```

**ฺฺฉ 4: Cache ูพุงฺฉ ฺฉู**
```
F12 โ Network โ Disable cache (ุชฺฉ ุจุฒู)
# ุณูพุณ ุตูุญู ุฑุง reload ฺฉู
```

**ฺฺฉ 5: ุจุฑุฑุณ Network**
```
F12 โ Network
# ุฏูุจุงู ุงู request ุจฺฏุฑุฏ:
GET /api/v1/messages/unread-count

# ุจุงุฏ Status: 200 ุจุงุดุฏ
# Response: {"unread_count": 5}
```

### ูููุฒ ฺฉุงุฑ ููโฺฉูุฏุ

**ุจุฑุฑุณ ูุงฺฏโูุง:**

```bash
# Backend logs
cd /Users/sedmahdiyar/Desktop/Minila/backend
docker-compose logs backend --tail=50

# Frontend logs
# ุฏุฑ terminal ฺฉู npm run dev ุงุฌุฑุง ุดุฏู
```

**ุชุณุช ูุณุชูู API:**

```bash
# 1. ูุงฺฏู ู ฺฏุฑูุชู ุชูฺฉู
curl -X POST http://localhost:8000/api/v1/auth/login-password \
  -H "Content-Type: application/json" \
  -d '{"email":"user@example.com","password":"your-password"}'

# ุฎุฑูุฌ: {"access_token": "...", "refresh_token": "..."}

# 2. ุชุณุช unread-count
curl http://localhost:8000/api/v1/messages/unread-count \
  -H "Authorization: Bearer YOUR_TOKEN_HERE"

# ุฎุฑูุฌ: {"unread_count": 5}
```

---

## ๐ธ ฺุฒ ฺฉู ุจุงุฏ ุจุจู

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ  Minila                        User Profile  โ
โ  โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ โ
โ  ุฏุงุดุจูุฑุฏ | ฺฉุงุฑุชโูุง | ฺฉุงูููุชโูุง | ูพุงูโูุง (5) โ
โ                                       โโโโโโโ โ
โ                                    Badge ูุฑูุฒ โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

**ูุดุฎุตุงุช Badge:**
- ุดฺฉู: ุฏุงุฑู ฺฉูฺฺฉ
- ุฑูฺฏ: ูุฑูุฒ (#EF4444)
- ูููุนุช: ุจุงูุง ุณูุช ฺูพ "ูพุงูโูุง"
- ูุญุชูุง: ุนุฏุฏ (1-99) ุง "99+"
- ูููุช: Bold, ุณูุฏ

---

## โจ ูฺฺฏโูุง

1. **Real-time**: ูุฑ 30 ุซุงูู ุฎูุฏฺฉุงุฑ ุขูพุฏุช ูโุดูุฏ
2. **Smart**: ููุท ุจุฑุง ฺฉุงุฑุจุฑุงู ูุงฺฏู ุดุฏู ููุงุด ุฏุงุฏู ูโุดูุฏ
3. **Responsive**: ุฏุฑ Desktop ู Mobile ููุงุด ุฏุงุฏู ูโุดูุฏ
4. **Dynamic**: ุจุนุฏ ุงุฒ ุฎูุงูุฏู ูพุงูุ ุจูุงูุงุตูู ุขูพุฏุช ูโุดูุฏ

---

## ๐ฏ ุงฺฏุฑ ููู ฺุฒ ุฏุฑุณุช ฺฉุงุฑ ฺฉุฑุฏ

โ Badge ุฏุฑ Navbar ุธุงูุฑ ูโุดูุฏ  
โ ุชุนุฏุงุฏ ุฏุฑุณุช ููุงุด ุฏุงุฏู ูโุดูุฏ  
โ ุจุนุฏ ุงุฒ ุฎูุงูุฏู ูพุงูุ ุชุนุฏุงุฏ ฺฉู ูโุดูุฏ  
โ ูุฑ 30 ุซุงูู ุฎูุฏฺฉุงุฑ refresh ูโุดูุฏ  

**ุชุจุฑฺฉ! ูุงุจูุช Badge ูพุงูโูุง ุฎูุงูุฏู ูุดุฏู ุจุง ููููุช ูพุงุฏูโุณุงุฒ ุดุฏ! ๐**

